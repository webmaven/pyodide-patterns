<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyodide Architecture Gallery</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; margin: 0; padding: 0; }
        header { background: var(--primary); color: white; padding: 60px 20px; text-align: center; }
        header h1 { margin: 0; font-size: 2.5em; font-weight: 300; }
        header p { margin: 10px 0 0; font-style: italic; opacity: 0.8; }
        
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        
        .section-title { border-bottom: 2px solid var(--accent); display: inline-block; margin-bottom: 25px; color: var(--primary); }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-bottom: 50px; }
        
        .card { background: var(--card-bg); border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 25px; transition: transform 0.2s; border-left: 4px solid var(--accent); display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-50px); }
        .card h3 { margin-top: 0; color: var(--primary); }
        .card p { font-size: 0.9em; color: #666; flex-grow: 1; }
        .card .links { margin-top: 15px; display: flex; gap: 15px; font-size: 0.85em; font-weight: bold; }
        .card a { color: var(--accent); text-decoration: none; }
        .card a:hover { text-decoration: underline; }
        
        .badge { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 0.7em; margin-bottom: 10px; font-weight: bold; text-transform: uppercase; }
        .badge-arch { background: #e1f5fe; color: #01579b; }
        .badge-worker { background: #ede7f6; color: #311b92; }
        .badge-loading { background: #e8f5e9; color: #1b5e20; }
        .badge-iso { background: #fff3e0; color: #e65100; border: 1px solid #ffccbc; }

        footer { text-align: center; padding: 40px; color: #999; font-size: 0.8em; }
    </style>
</head>
<body>

<header>
    <h1>Pyodide Architecture</h1>
    <p>Engineering Blueprints for Browser-Native Python Applications</p>
</header>

<div class="container">
    
    <h2 class="section-title">Architectural & UI Patterns</h2>
    <div class="grid">
        <div class="card">
            <span class="badge badge-arch">Basics</span>
            <h3>Hello World & Benchmarking</h3>
            <p>The fundamental entry point: bidirectional communication between Python and the browser.</p>
            <div class="links">
                <a href="examples/hello_world.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/unit-testing.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-arch">Reactive UI</span>
            <h3>Reactivity: VDOM, Signals, Observer</h3>
            <p>Three native Python strategies for syncing data state with the browser DOM without JavaScript.</p>
            <div class="links">
                <a href="examples/loading/reactive_signals.html">Signals</a>
                <a href="examples/loading/reactive_vdom.html">VDOM</a>
                <a href="examples/loading/reactive_observer.html">Observer</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/reactive-ui.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-arch">UX Logic</span>
            <h3>Virtual Terminal & FS Explorer</h3>
            <p>Components for capturing Python stdout/stderr and navigating the virtual filesystem.</p>
            <div class="links">
                <a href="examples/loading/virtual_terminal.html">Terminal</a>
                <a href="examples/loading/vfs_explorer.html">Explorer</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/virtual-terminal.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-arch">Control Flow</span>
            <h3>UI Offloading (Sync-Async)</h3>
            <p>Writing linear Python UI code that offloads heavy tasks to workers via an async bridge.</p>
            <div class="links">
                <a href="examples/loading/python_ui_offloading.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/python-ui-offloading.md">Docs</a>
            </div>
        </div>
    </div>

    <h2 class="section-title">Web Worker & Performance Patterns</h2>
    <div class="grid">
        <div class="card">
            <span class="badge badge-worker">Reliability</span>
            <h3>Worker Heartbeat & Handshake</h3>
            <p>Robust detection of silent crashes and infinite loops in background threads.</p>
            <div class="links">
                <a href="examples/loading/worker_heartbeat.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/worker-heartbeat.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-worker">Throughput</span>
            <h3>Worker Pool & RPC</h3>
            <p>Scaling Python execution across multiple CPU cores with task queuing and Comlink.</p>
            <div class="links">
                <a href="examples/workers/worker_pool.html">Worker Pool</a>
                <a href="examples/workers/comlink_rpc.html">Comlink RPC</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/worker-pool.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-worker badge-iso">Isolated Environment</span>
            <h3>Shared Memory (SAB) & WebGPU</h3>
            <p>Zero-copy data sharing between Python and GPU hardware using SharedArrayBuffer.</p>
            <div class="links">
                <a href="examples/loading/shared_memory_gpu.html">SAB Demo</a>
                <a href="examples/loading/webgpu_compute.html">GPU Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/shared-memory.md">Docs</a>
            </div>
        </div>
    </div>

    <h2 class="section-title">Loading & Persistence Patterns</h2>
    <div class="grid">
        <div class="card">
            <span class="badge badge-loading">Optimization</span>
            <h3>Bootstrapping & Milestones</h3>
            <p>Techniques for progressive loading and user feedback during the Pyodide runtime initialization.</p>
            <div class="links">
                <a href="examples/loading/progressive_bootstrapping.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/bootstrapping.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-loading">Caching</span>
            <h3>Service Worker Caching</h3>
            <p>Turning "Cold Starts" into "Warm Starts" by caching WASM and wheels in the browser.</p>
            <div class="links">
                <a href="examples/loading/service_worker_cache.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/service-worker-caching.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-loading">Data</span>
            <h3>Persistent FS (IDBFS)</h3>
            <p>Mounting IndexedDB so standard Python file I/O survives page reloads.</p>
            <div class="links">
                <a href="examples/loading/persistence.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/persistence.md">Docs</a>
            </div>
        </div>
    </div>

    <h2 class="section-title">Infrastructure & Lifecycle Patterns</h2>
    <div class="grid">
        <div class="card">
            <span class="badge badge-iso">Security</span>
            <h3>Cross-Origin Isolation</h3>
            <p>Deep dive into COOP/COEP headers and the requirements for SAB and threads.</p>
            <div class="links">
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/cross-origin-isolation.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-iso">Ops</span>
            <h3>Deployment Guide</h3>
            <p>Config snippets for GitHub Pages, Vercel, and Netlify security headers.</p>
            <div class="links">
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/deployment-guide.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-loading">Memory</span>
            <h3>Memory Management & GC</h3>
            <p>Managing the lifecycle of JS-Python proxies to prevent WASM heap fragmentation.</p>
            <div class="links">
                <a href="examples/loading/proxy_management.html">Proxy Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/memory-management.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-worker">Lifecycle</span>
            <h3>Worker Load Failure</h3>
            <p>Detecting and recovering from errors that occur during background worker bootstrap.</p>
            <div class="links">
                <a href="examples/workers/worker_load_error.html">Live Demo</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/worker-load-failure.md">Docs</a>
            </div>
        </div>
    </div>

    <h2 class="section-title">Testing & QA Patterns</h2>
    <div class="grid">
        <div class="card">
            <span class="badge badge-arch">Logic</span>
            <h3>Unit Testing (CPython)</h3>
            <p>Verifying Python logic in standard CPython without browser overhead.</p>
            <div class="links">
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/unit-testing.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-arch">Integration</span>
            <h3>Integration Testing</h3>
            <p>Mocking the browser environment to test Pyodide-JS interactions.</p>
            <div class="links">
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/integration-testing.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-arch">E2E</span>
            <h3>E2E Testing (Playwright)</h3>
            <p>Full-stack verification of Pyodide applications in real browser instances.</p>
            <div class="links">
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/e2e-testing.md">Docs</a>
            </div>
        </div>
        <div class="card">
            <span class="badge badge-iso">Stability</span>
            <h3>Test Suite Isolation</h3>
            <p>Solving the "Event Loop Conflict" when running async tests in parallel.</p>
            <div class="links">
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/test-suite-isolation.md">Docs</a>
            </div>
        </div>
    </div>

    <h2 class="section-title">Utility & Debugging</h2>
    <div class="grid">
        <div class="card">
            <span class="badge badge-arch">Observability</span>
            <h3>Console Log Capturing</h3>
            <p>Mirroring Python stdout to the browser console for developer visibility.</p>
            <div class="links">
                <a href="examples/js/error.js">Live Script</a>
                <a href="https://github.com/webmaven/pyodide-patterns/blob/main/docs/patterns/console-log-capturing.md">Docs</a>
            </div>
        </div>
    </div>

</div>

<footer>
    &copy; 2026 Pyodide Architecture Project | Engineering Blueprints for the Browser
</footer>

<script>
    // Register the COOP/COEP Service Worker to enable SAB on GitHub Pages
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("coop-coep-sw.js").then(reg => {
            console.log("Service Worker registered for COOP/COEP scope.");
            reg.addEventListener("updatefound", () => {
                if (navigator.serviceWorker.controller) {
                    console.log("New SW version found, reloading...");
                    window.location.reload();
                }
            });
        });
    }
</script>
</body>
</html>
